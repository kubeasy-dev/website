{"$schema":"https://json-schema.org/draft/2020-12/schema","title":"Kubeasy Validation","description":"Schema for Kubeasy challenge validations","type":"object","properties":{"key":{"type":"string","description":"Unique identifier (snake_case)"},"title":{"type":"string","description":"User-friendly title"},"description":{"type":"string","description":"What this validation checks"},"order":{"type":"integer","description":"Execution order (1, 2, 3...)"},"type":{"$ref":"#/$defs/ValidationType"},"spec":{"oneOf":[{"if":{"properties":{"type":{"const":"status"}}},"then":{"$ref":"#/$defs/StatusSpec"}},{"if":{"properties":{"type":{"const":"log"}}},"then":{"$ref":"#/$defs/LogSpec"}},{"if":{"properties":{"type":{"const":"event"}}},"then":{"$ref":"#/$defs/EventSpec"}},{"if":{"properties":{"type":{"const":"metrics"}}},"then":{"$ref":"#/$defs/MetricsSpec"}},{"if":{"properties":{"type":{"const":"connectivity"}}},"then":{"$ref":"#/$defs/ConnectivitySpec"}}]}},"required":["key","title","description","order","type","spec"],"$defs":{"ValidationConfig":{"type":"object","properties":{"validations":{"type":"array","items":{"$ref":"#/$defs/Validation"}}},"required":["validations"],"additionalProperties":false},"Validation":{"type":"object","properties":{"key":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"order":{"type":"integer"},"type":{"$ref":"#/$defs/ValidationType"},"spec":{}},"required":["key","title","description","order","type","spec"],"additionalProperties":false},"ValidationType":{"type":"string","enum":["status","log","event","metrics","connectivity"]},"Target":{"type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string"},"labelSelector":{"type":"object","additionalProperties":{"type":"string"}}},"required":["kind"],"additionalProperties":false},"StatusSpec":{"type":"object","properties":{"target":{"$ref":"#/$defs/Target"},"conditions":{"type":"array","items":{"$ref":"#/$defs/StatusCondition"}}},"required":["target","conditions"],"additionalProperties":false},"StatusCondition":{"type":"object","properties":{"type":{"type":"string"},"status":{"type":"string"}},"required":["type","status"],"additionalProperties":false},"LogSpec":{"type":"object","properties":{"target":{"$ref":"#/$defs/Target"},"container":{"type":"string"},"expectedStrings":{"type":"array","items":{"type":"string"}},"sinceSeconds":{"type":"integer"}},"required":["target","expectedStrings"],"additionalProperties":false},"EventSpec":{"type":"object","properties":{"target":{"$ref":"#/$defs/Target"},"forbiddenReasons":{"type":"array","items":{"type":"string"}},"sinceSeconds":{"type":"integer"}},"required":["target","forbiddenReasons"],"additionalProperties":false},"MetricsSpec":{"type":"object","properties":{"target":{"$ref":"#/$defs/Target"},"checks":{"type":"array","items":{"$ref":"#/$defs/MetricCheck"}}},"required":["target","checks"],"additionalProperties":false},"MetricCheck":{"type":"object","properties":{"field":{"type":"string"},"operator":{"type":"string"},"value":{"type":"integer"}},"required":["field","operator","value"],"additionalProperties":false},"ConnectivitySpec":{"type":"object","properties":{"sourcePod":{"$ref":"#/$defs/SourcePod"},"targets":{"type":"array","items":{"$ref":"#/$defs/ConnectivityCheck"}}},"required":["sourcePod","targets"],"additionalProperties":false},"SourcePod":{"type":"object","properties":{"name":{"type":"string"},"labelSelector":{"type":"object","additionalProperties":{"type":"string"}}},"additionalProperties":false},"ConnectivityCheck":{"type":"object","properties":{"url":{"type":"string"},"expectedStatusCode":{"type":"integer"},"timeoutSeconds":{"type":"integer"}},"required":["url","expectedStatusCode"],"additionalProperties":false},"Result":{"type":"object","properties":{},"additionalProperties":false}}}